{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
    {% block title %}<title>Escuela de Lenguaje en San Javier | {{colegio.nombre}} - Región del Maule</title>{% endblock %}
    <meta name="description" content="Escuela de lenguaje en San Javier, Región del Maule. {{colegio.nombre}} ofrece educación de calidad para niños y niñas. Conoce nuestra misión, visión, valores y proceso de admisión.">
    <meta name="keywords" content="escuela de lenguaje, San Javier, Región del Maule, educación, admisión, niños, lenguaje, colegio, {{colegio.nombre}}">
    <meta name="geo.placename" content="San Javier, Región del Maule, Chile">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js"></script>
    <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    <script src="{% static 'libs/bootstrap-datepicker/js/bootstrap-datepicker.js' %}"></script>
    <link rel="stylesheet" href="{% static 'libs/bootstrap-datepicker/css/bootstrap-datepicker.css' %}" type="text/css" />
    <link rel="stylesheet" href="{% static 'css/home/secciones/profesores.css' %}" type="text/css" />
    <link rel="stylesheet" href="{% static 'css/carousel.css' %}" type="text/css" />
    <link rel="stylesheet" href="{% static 'css/comunicados.css' %}" type="text/css" />
    <link rel="stylesheet" href="{% static 'css/btns.css' %}" type="text/css" />

    <link rel="stylesheet" type="text/css" href="{% static 'css/home/secciones/sombra-estilos.css'%}">

    <link rel="stylesheet" type="text/css" href="{% static 'css/menu/menu.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/menu/menumovil.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/iconos-menu.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/footer.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/menu/mega-menu-custom.css' %}">


    {% include "common_styles.html" %}
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-md fixed-top">
            <div class="py-3 d-flex align-items-center ms-4">
                {% if colegio.logo %}
                    <img src="{{ colegio.logo.url }}" alt="Logo {{ colegio.nombre }}" class="navbar-logo me-2" style="height: 80px; width: auto;">
                    <a class="navbar-brand navbar-brand-infantil" href="{% url 'inicio' %}">
                        {% for palabra in colegio.nombre.split %}
                            <span class="infantil-color infantil-color-{{ forloop.counter }}">{{ palabra }}</span>{% if not forloop.last %} {% endif %}
                        {% endfor %}
                    </a>
                {% else %}
                    <a class="navbar-brand navbar-brand-infantil" href="{% url 'inicio' %}">
                        {% for palabra in colegio.nombre.split %}
                            <span class="infantil-color infantil-color-{{ forloop.counter }}">{{ palabra }}</span>{% if not forloop.last %} {% endif %}
                        {% endfor %}
                    </a>
                {% endif %}
            </div>

            <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                <ul class="navbar-nav">
                    {% for item in menu_items %}
                        <li class="nav-item">
                            
                            {% if item.url == 'noticias'  %}
                                <a class="nav-link btn btn-primary mx-1" href="{% url item.url 0 %}">{{ item.nombre }}</a>
                            {% else %}
                                <a class="nav-link btn btn-primary" href="{% url item.url %}">{{ item.nombre }}</a>
                            {% endif %}
                        </li>
                    {% endfor %}
                    

                    {% for mega_menu in mega_menus %}
                        <li class="nav-item colegio">
                            <a class="nav-link btn btn-primary">
                                {{ mega_menu.nombre }}&nbsp;
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                </svg>
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="d-flex align-items-center ms-auto me-4">
                <div class="py-3 d-none d-md-flex align-items-center">
                    {% if user.is_authenticated %}
                        <a href="#" id="logout-link" class="btn btn-primary">Logout</a>
                    {% else %}
                        <a href="{% url 'login' %}" class="btn btn-primary">Login</a>
                    {% endif %}
                </div>
           
                <div class="py-0 d-flex d-md-none align-items-center">
                    <button id="hamburger-btn" class="btn btn-hamburger" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">☰</button>
                    <div class="dropdown-menu menu-hamburguesa" id="hamburger-dropdown">
                        {% for item in menu_items %}
                            <a class="dropdown-item d-flex justify-content-between align-items-center" href="{% if item.url == 'noticias' %}{% url item.url 0 %}{% else %}{% url item.url %}{% endif %}">
                                {{ item.nombre }}
                                <div class="icon-circle icon-item ms-2">
                                    {% if item.icono %}
                                        <i class="bi {{ item.icono }}" style="font-size: 1.5rem;"></i>
                                    {% else %}
                                        <i class="bi bi-chevron-right ms-2"></i>
                                    {% endif %}
                                </div>
                            </a>
                        {% endfor %}
                                            
                        {% for mega_menu in mega_menus %}
                            <div class="submenu-parent">
                                <span class="submenu-toggle" style="display: flex; align-items: center; justify-content: space-between; cursor: pointer;">
                                    {{ mega_menu.nombre }}
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down ms-2" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                    </svg>
                                </span>
                                <div class="submenu" style="position: absolute; left: 0; top: 100%; min-width: 200px; background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.08); display: none;">
                                    <a class="dropdown-item" href="{% url 'mision' %}">Misión</a>
                                    <a class="dropdown-item" href="{% url 'vision' %}">Visión</a>
                                    <a class="dropdown-item" href="{% url 'valores' %}">Valores</a>
                                    <a class="dropdown-item" href="{% url 'proyecto_educativo' %}">Proyecto Educativo</a>
                                    <a class="dropdown-item" href="{% url 'reglamentos' %}">Reglamentos</a>
                                    <a class="dropdown-item" href="{% url 'directiva_megamenu' %}">Directiva</a>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </nav>

        <div class="mega-menu">

    <div class="mega-menu-column mega-menu-about">
        <h2>Acerca del Colegio</h2>
        <p>
            Educación de calidad en San Javier<br>
            para el desarrollo del lenguaje en niños y niñas.
        </p>
    </div>

    <div class="mega-menu-column mega-menu-links">
        <a href="{% url 'mision' %}"><i class="bi bi-heart icon"></i> Misión</a>
        <a href="{% url 'vision' %}"><i class="bi bi-eye icon"></i> Visión</a>
        <a href="{% url 'valores' %}"><i class="bi bi-heart icon"></i> Valores</a>
    </div>

    <div class="mega-menu-column mega-menu-links">
        <a href="{% url 'proyecto_educativo' %}"><i class="bi bi-book icon"></i> Proyecto Educativo</a>
        <a href="{% url 'reglamentos' %}"><i class="bi bi-file-text icon"></i> Reglamentos</a>
        <a href="{% url 'directiva_megamenu' %}"><i class="bi bi-people icon"></i> Directiva</a>
    </div>
    
    <div class="mega-menu-column mega-menu-links">
        <a href="{% url 'noticias' id=0 %}"><i class="bi bi-book icon"></i> Noticias</a>
        <a href="{% url 'comunicados' %}"><i class="bi bi-calendar icon"></i> Comunicados</a>
        <a href="{% url 'lista_actividades' %}"><i class="bi bi-camera icon"></i> Fotos</a>
    </div>

</div>
    </header>

    <main class="main-content">
        {% block body %}
        {% endblock %}
    </main>

    <footer class="text-center text-lg-start bg-light text-muted">
        <section class="redes-sociales-section d-flex justify-content-center justify-content-lg-between p-4">
            <div class="me-5 d-none d-lg-block">
                <span>Conecte con nosotros a través de las redes sociales:</span>
            </div>
            <div>
                {% include 'components/redes_sociales.html' with style='buttons' size='sm' %}
            </div>
        </section>
        <section class="container-fluid footer-school-section py-4 my-0 w-100 d-flex align-items-center justify-content-center">
            <div class="row g-4 align-items-start w-100">
                <div class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4 text-center">
                    {% if colegio.logo %}
                        <img src="{{ colegio.logo.url }}" alt="Logo {{ colegio.nombre }}" class="img-fluid rounded-circle mb-2" style="max-height: 110px;">
                    {% else %}
                        <h4 class="fw-bold text-center mb-2">{{ colegio.nombre }}</h4>
                    {% endif %}
                    <small class="school-desc d-block mx-auto mt-2">
                        Escuela de lenguaje en San Javier, Región del Maule.
                    </small>
                </div>
                <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mb-4">
                    <h6 class="text-uppercase fw-bold mb-3">
                        <i class="bi bi-mortarboard me-2 text-primary"></i>Colegio
                    </h6>
                    <ul class="list-unstyled">
                        <li><a href="{% url 'directiva_megamenu' %}" class="badge bg-primary text-wrap mb-1 text-white footer-badge">Directiva</a></li>
                        <li><a href="{% url 'mision' %}" class="badge bg-primary text-wrap mb-1 text-white footer-badge">Misión</a></li>
                        <li><a href="{% url 'vision' %}" class="badge bg-primary text-wrap mb-1 text-white footer-badge">Visión</a></li>
                        <li><a href="{% url 'valores' %}" class="badge bg-primary text-wrap mb-1 text-white footer-badge">Valores</a></li>
                    </ul>
                </div>
                <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mb-4">
                    <h6 class="text-uppercase fw-bold mb-3">
                        <i class="bi bi-link-45deg me-2 text-warning"></i>ayuda
                    </h6>
                    <ul class="list-unstyled">
                        <li><a href="{% url 'admision' %}" class="badge bg-warning text-wrap mb-1 text-white footer-badge">Admisión</a></li>
                        <li><a href="{% url 'noticias' id=0 %}" class="badge bg-warning text-wrap mb-1 text-white footer-badge">Noticias</a></li>
                        <li><a href="{% url 'lista_actividades' %}" class="badge bg-warning text-wrap mb-1 text-white footer-badge">Fotos</a></li>
                    </ul>
                </div>
                <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">
                    <h6 class="text-uppercase fw-bold mb-3">
                        <i class="bi bi-envelope-at-fill me-2 text-light"></i>Contacto
                    </h6>
                    <ul class="list-unstyled footer-contact-list">
                        <li><i class="bi bi-arrow-right me-2"></i>{{ colegio.direccion }}</li>
                        <li><i class="bi bi-envelope me-2"></i>{{ colegio.email }}</li>
                        <li><i class="bi bi-phone me-2"></i>{{ colegio.telefono }}</li>
                    </ul>
                </div>
            </div>
        </section>
        <div class="text-center academics-section p-4" >
            © 2021:
            <a class="text-reset fw-bold" href="https://academics.cl">Academics</a>
        </div>
    </footer>

    <script src="{% static 'js/menu.js' %}"></script>
    <script src="{% static 'js/tooltips.js' %}"></script>
    <script src="{% static 'js/logout.js' %}"></script>


<!-- Lazy Loading CSS -->
<style>
    img.lazy {
        opacity: 0;
        transition: opacity 0.3s;
    }
    img.loaded {
        opacity: 1;
    }
</style>

<!-- Lazy Loading JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Lazy loading para imágenes
    const lazyImages = document.querySelectorAll('img.lazy');
    
    const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.classList.remove('lazy');
                img.classList.add('loaded');
                observer.unobserve(img);
            }
        });
    });

    lazyImages.forEach(img => imageObserver.observe(img));

    // Lazy loading para backgrounds
    const lazyBgs = document.querySelectorAll('.lazy-bg');
    
    const bgObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const element = entry.target;
                element.style.backgroundImage = `url('${element.dataset.bg}')`;
                element.classList.remove('lazy-bg');
                observer.unobserve(element);
            }
        });
    });

    lazyBgs.forEach(bg => bgObserver.observe(bg));
});
</script>

</body>
</html>